model Appeal {
  id            String   @id @default(cuid())
  ticketNumber  String   @unique
  ticketType    String
  date          DateTime
  time          String
  location      String
  circumstances String   @db.Text
  evidence      String[] // Stored as JSON
  vehicleReg    String?
  penaltyAmount Float?
  status        String   // Draft, Submitted, In Review, Approved, Rejected
  userId        String
  user          User     @relation(fields: [userId], references: [id])
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  analysis      AppealAnalysis?

  @@index([userId])
  @@index([status])
  @@index([ticketNumber])
}

model AppealAnalysis {
  id              String   @id @default(cuid())
  appealId        String   @unique
  appeal          Appeal   @relation(fields: [appealId], references: [id])
  recommendation  String   @db.Text
  confidence      Float
  reasoning       String[] // Stored as JSON
  evidence        String[] // Stored as JSON
  precedentCases  String   @db.Text // Stored as JSON
  legalReferences String   @db.Text // Stored as JSON
  template        String   @db.Text
  successRate     Float
  timeEstimate    String
  nextSteps       String[] // Stored as JSON
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([appealId])
}
